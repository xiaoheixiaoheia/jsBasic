<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>数组方法测试一下</title>
</head>

<body>

</body>
<script type="text/javascript">
    // 参考：https://www.cnblogs.com/sqh17/p/8529401.html
    // pop：删除数组最后一位，只能删除一个，返回值是删除的元素，并且改变原数组
    var arrpop = [1, 2, 3, 4, 5];
    console.log("pop返回", arrpop.pop());
    console.log("pop原数组", arrpop);

    //push:末尾添加，返回值是添加之后的数组的长度，改变原数组,可以添加多个元素
    var arrpush = [1, 2, 3, 4, 2222];
    console.log("push返回", arrpush.push(1, 3, 4, 4, 4));
    console.log("push原数组", arrpush);

    // shift:从首位删除元素，只能删除一个，返回值是删除的元素值
    var arrshift = [1, 2, 3, 4, 5];
    console.log("arrshift返回", arrshift.shift());
    console.log("arrshift原数组", arrshift);

    //unshift:首位添加元素，返回添加完后的数组长度，改变原数组,能添加多个元素
    var arrunshift = [1, 2, 3, 4, 5];
    console.log("arrunshift返回", arrunshift.unshift(1, 2, 3, 4));
    console.log("arrunshift原数组", arrunshift);

    //splice：splice(开始位置，几位)，返回删除的数组元素，改变原数组
    let arrsplice = [1, 2, 3, 4, 5]
    console.log("arrsplice返回", arrsplice.splice(2, 2)) //[3,4]
    console.log("arrsplice原数组", arrsplice) // [1,2,5]

    //concat：连接两个数组，返回值为连接后的新数组，不改变原数组的值
    let arrconcat = [1, 2, 3, 4, 5]
    console.log("arrconcat返回", arrconcat.concat([1, 2])) // [1,2,3,4,5,1,2]
    console.log("arrconcat原数组", arrconcat) // [1,2,3,4,5]

    // split() 将字符串转化为数组，不改变原数组
    let strsplit = '123456'
    console.log("strsplite返回", strsplit.split('')) // ["1", "2", "3", "4", "5", "6"]
    console.log("strsplite原数组：", strsplit)

    // sort:将数组进行排序,返回值是排好的数组，默认是按照最左边的数字进行排序，不是按照数字大小排序的
    let arrsort = [2, 10, 6, 1, 4, 22, 3]
    console.log(arrsort.sort()) // [1, 10, 2, 22, 3, 4, 6]
    let arrsort1 = arrsort.sort((a, b) => a - b)
    console.log(arrsort1) // [1, 2, 3, 4, 6, 10, 22]
    let arrsort2 = arrsort.sort((a, b) => b - a)
    console.log(arrsort2) // [22, 10, 6, 4, 3, 2, 1]

    // reverse() 将数组反转,返回值是反转后的数组,改变原数组
    let arrreverse = [1, 2, 3, 4, 5, 6]
    console.log("arrreverse返回", arrreverse.reverse()) // [6,5,4,3,2,1]
    console.log("arrreverse原数组：", arrreverse) // [6,5,4,3,2,1]

    //slice(start,end) 切去索引值start到索引值end的数组，不包含end索引的值，返回值是切出来的数组，不改变原数组
    let arrslice = [1, 2, 3, 4, 5]
    console.log("arrslice返回", arrslice.slice(1, 3)) // [2,3]
    console.log("arrslice原数组", arrslice) //  [1,2,3,4,5]

    //  forEach(callback) 遍历数组,无return  即使有return，也不会返回任何值，并且会影响原来的数组
    //  callback的参数： value --当前索引的值
    // 　　　　　　　　　 index --索引
    // 　　　　　　　　　 array --原数组
    // let arrforeach = [1, 2, 3, 4, 5]
    // arrforeach.forEach((value, index, array) => {
    //         console.log(`value:${value}    index:${index}     array:${array}`)
    //     })
    //  value:1    index:0     array:1,2,3,4,5
    //  value:2    index:1     array:1,2,3,4,5
    //  value:3    index:2     array:1,2,3,4,5
    //  value:4    index:3     array:1,2,3,4,5
    //  value:5    index:4     array:1,2,3,4,5

    // let arrforeach = [1, 2, 3, 4, 5]
    // arrforeach.forEach((value, index, array) => {
    //     value = value * 2
    //     console.log(`value:${value}    index:${index}     array:${array}`)
    // })
    // console.log(arrforeach)
    // value:2    index:0     array:1,2,3,4,5
    // value:4    index:1     array:1,2,3,4,5
    // value:6    index:2     array:1,2,3,4,5
    // value:8    index:3     array:1,2,3,4,5
    // value:10   index:4     array:1,2,3,4,5
    // [1, 2, 3, 4, 5]

    var arrforeach = [1, 2, 3, 4];
    var res = arrforeach.forEach((item, index, arr) => {
        arrforeach[index] = item * 2;
        // return arrforeach
    })
    console.log(arrforeach); // [2,4,6,8]
    console.log(res); // undefined

    // arr.map(callback) 映射数组(遍历数组),有return 返回一个新数组 。
    // callback的参数： value --当前索引的值
    // 　　　　　　　　　index --索引
    // 　　　　　　　　　array --原数组
    let arrmap = [10, 9, 8, 7, 6]
    arrmap.map((value, index, array) => {
        value = value * 2
        console.log(`value:${value}    index:${index}     array:${array}`)
    })
    console.log(arrmap)

    var arrmap1 = [10, 9, 8, 7, 6];
    var res1 = arrmap1.map((item, index, arrmap) => {
        item = item * 3;
        return item;
    })
    console.log(arrmap1); // [1,2,3,4]
    console.log(res1); // [3,6,9,12]
    var arrmap3 = [33, 44, 55, 66, 77];
    let arrmapTotal = arrmap3.map(item => {
        item = item * 10;
        return item
    })
    console.log(arrmap3) // [33, 44, 55, 66, 77]
    console.log(arrmapTotal) // [330, 440, 550, 660, 770]

    //  arr.filter(callback) 过滤数组，返回一个满足要求的数组 
    //            callback的参数： value --当前索引的值
    // 　　　　　　　　　　         index --索引
    let arrfilter = [1, 2, 3, 4, 5]
    let arrfilter1 = arrfilter.filter((value, index) => value < 3)
    console.log(arrfilter1) // [1, 2]


    //  arr.every(callback) 依据判断条件，数组的元素是否全满足，若满足则返回ture
    //             callback的参数： value --当前索引的值
    // 　　　　　　　　　　          index --索引
    let arrevery = [1, 2, 3, 4, 5]
    let arrevery1 = arrevery.every((value, index) => value < 3)
    console.log(arrevery1) // false
    let arrevery2 = arrevery.every((value, index) => value < 6)
    console.log(arrevery2) // true

    // arr.some() 依据判断条件，数组的元素是否有一个满足，若有一个满足则返回ture
    //  　　　　callback的参数： value --当前索引的值
    // 　　　　　　　　　　      index --索引
    let arrsome = [1, 2, 3, 4, 5]
    let arrsome1 = arrsome.some((value, index) => value < 3)
    console.log(arrsome1) // true
    let arrsome2 = arrsome.some((value, index) => value > 6)
    console.log(arrsome2) // false


    //reduce:详细介绍看连接 https://www.cnblogs.com/xieoxie3000question/articles/13361994.html
    // arr.reduce(callback,[initialValue])
    // callback （执行数组中每个值的函数，包含四个参数）
    // 1、previousValue （上一次调用回调返回的值，或者是提供的初始值（initialValue））
    // 2、currentValue （数组中当前被处理的元素）
    // 3、index （当前元素在数组中的索引）
    // 4、array （调用 reduce 的数组）
    // initialValue （作为第一次调用 callback 的第一个参数。）
    //可用于求和，求乘积，计算数组中每个元素出现的次数，数组去重，将二维数组转化为一维，将多维数组转化为一维，对象里的属性求和
    // (1)数组求和，求乘
    var arrreduce1 = [1, 3, 4, 5];
    var sum = arrreduce1.reduce((pre, cur) => pre + cur)
    var mul = arrreduce1.reduce((pre, cur) => pre * cur)
    console.log(sum)
        // (2)计算每个元素出现的次数
    let names = ['zhangsan', 'lisi', 'wangwu', 'zhangsan', 'lisi'];
    let nameNum = names.reduce((pre, cur) => {
        if (cur in pre) {
            pre[cur]++
        } else {
            pre[cur] = 1
        }
        return pre
    }, {})
    console.log(nameNum);
    // (3) 数组去重
    let arrReduce3 = [1, 2, 3, 4, 5, 4, 3];
    // let newArr = arrReduce3.reduce((pre, cur) => {
    //     if (!pre.includes(cur)) {
    //         return pre.concat(cur)
    //     } else {
    //         return pre
    //     }
    // }, [])
    // console.log('去重后的数组', newArr); // [1, 2, 3, 4]
    let newArr = arrReduce3.reduce((pre, cur) => {
        if (!pre.includes(cur)) {
            return pre.concat(cur)
        } else {
            return pre
        }
    })
    console.log('去重后的数组', newArr);

    // arr.indexOf() 查找某个元素的索引值，若有重复的，则返回第一个查到的索引值若不存在，则返回 -1
    let arrIndexOf = [1, 2, 3, 4, 5, 2]
    let arrIndexOf1 = arrIndexOf.indexOf(2)
    console.log(arrIndexOf1) // 1
    let arrIndexOf2 = arrIndexOf.indexOf(9)
    console.log(arrIndexOf2) // -1

    // Array.from() 将伪数组变成数组，就是只要有length的就可以转成数组。 ---es6
    let strFrom = '12345'
    console.log(Array.from(strFrom)) // ["1", "2", "3", "4", "5"]
    let obj = {
        0: 'a',
        1: 'b',
        length: 2
    }
    console.log(Array.from(obj)) // ["a", "b"]

    // 21 Array.of() 将一组值转换成数组，类似于声明数组    ---es6
    let strFrom1 = '11'
    console.log(Array.of(strFrom1)) // ['11']

    // arr.find(callback) 找到第一个符合条件的数组成员
    let arrFind = [1, 2, 3, 4, 5, 2, 4]
    let arrFind1 = arrFind.find((value, index, array) => value > 2)
    console.log(arrFind1) // 3

    // arr.findIndex(callback) 找到第一个符合条件的数组成员的索引值
    let arr = [1, 2, 3, 4, 5]
    let arr1 = arr.findIndex((value, index, array) => value > 3)
    console.log(arr1) // 3
</script>

</html>